
var activeProfileTab = null;

//dynamic navigation
/* function initNav()
{
	if (typeof document.body.style.maxHeight == 'undefined') {
		var nav = document.getElementById("navigation-main");
		var lis = nav.getElementsByTagName("li");
		for (var i=0; i<lis.length; i++)
		{
			lis[i].onmouseover = function()
			{
				if (this.className.indexOf("hover") == -1)
				{
					this.className += " hover";
				}
			}
			lis[i].onmouseout = function()
			{
				this.className = this.className.replace(" hover", "");
			}
		}
	}
}
*/

// show "Other" on checkout form
function toggleVisibility(title)
{
	var element = getPageElement(title);
	element.style.display = "block";
}

function getPageElement(name)
{
	if (document.getElementById) {
		return document.getElementById(name);
	} else if (document.all) {
		return document.all[name];
	}
}

function showother(value) 
{
	if(value == "Other")
	{
		toggleVisibility('Marketing_other_div');
	}
}

// matrix Roll section
function initRoll()
{
	var _blocks = document.getElementsByTagName("div");
	for(i =0; i < _blocks.length; i++)
	{
		if (_blocks[i].className.indexOf("rollholder") != -1)
		{
			var _links = _blocks[i].getElementsByTagName("a");
			for(k =0; k < _links.length; k++)
			{
				if (_links[k].className.indexOf("switcher") != -1)
				{
					_links[k]._holder = _blocks[i];
					_links[k].onclick = function()
					{
						if (this._holder)
						{
							if (this._holder.className.indexOf("close") == -1)
							{
								this._holder.className += " close";
							}
							else
							{
								this._holder.className = this._holder.className.replace("close", "");
							}
						}
						return false;
					}
				}
			}
		}
	}
}

function initProfile() {
	var _selector = document.getElementById("profile-selector");
	if(_selector)
	{
		var _inputs = _selector.getElementsByTagName("input");
		var _labels = _selector.getElementsByTagName("label");
		for (i = 0; i<_inputs.length; i++)
		{
			if (_inputs[i].type == "radio")
			{
				if (_inputs[i].checked)
				{
					_inputs[i].selected = true;					
				}
				else
				{
					_inputs[i].selected = false;
				}
			
				hideProfileTab(_inputs[i]);
				for (k =0; k < _labels.length; k++)
				{
					if(_labels[k].htmlFor == _inputs[i].id)
					{
						_inputs[i]._label = _labels[k];
						_inputs[i].add
					}
				}				
				if (_inputs[i].cheched)
				{
					showProfileTab(_inputs[i]);					
				}
				_inputs[i].onclick = function()
				{
					showhideProfileTab(this);	
				}
			}
		}
	}
}

function showhideProfileTab(_this)
{
	if (!_this.selected)
	{
		var _tab = getProfileTabName(_this.id);
		if (_tab)
		{
			if (_tab.style.display == "none")
			{
				showProfileTab(_this);	
			}
			else
			{
				hideProfileTab(_this);
			} 
		}
	}
}

function hideProfileTab(_this)
{
	var _tab = getProfileTabName(_this.id);
	if (_tab)
	{
		_this.selected = false;
		_this.checked = false;
		_tab.style.display = "none"; 
	}
	return false;
}

function showProfileTab(_this)
{
	if(!_this.selected)
	{
		var _tab = getProfileTabName(_this.id);
		if (_tab)
		{
			if (activeProfileTab && _this != activeProfileTab)
			{
				hideProfileTab(activeProfileTab);
			}
			activeProfileTab = _this;	
			
			_tab.style.display = "block";
			_this.selected = true; 
		}
	}
	return false;
}

function getProfileTabName (_id)
{
	var _temp = _id.replace("profile", "");
	_id = "profile-sub" + _temp;
	var _tab = document.getElementById(_id);
	if (_id)
	{
		return _tab;
	}
	else
	{
		return false;
	}
}

function initTabs()
{
	var _set = document.getElementById("product-tabset");
	if (_set)
	{
			var tabs = [];

			var links = _set.getElementsByTagName("a");
			for (var j = 0; j < links.length; j++)
			{

					tabs.push(links[j]);
					links[j].tabs = tabs;
					var c = document.getElementById(links[j].href.substr(links[j].href.indexOf("#") + 1));

					//reset all tabs on start
					if (c) if (links[j].className.indexOf("active") != -1) c.style.display = "block";
					else c.style.display = "none";

					links[j].onclick = function ()
					{
						var c = document.getElementById(this.href.substr(this.href.indexOf("#") + 1));
						if (c)
						{
							//reset all tabs before change
							for (var i = 0; i < this.tabs.length; i++)
							{
								var tab = document.getElementById(this.tabs[i].href.substr(this.tabs[i].href.indexOf("#") + 1));
								if (tab)
								{
									tab.style.display = "none";
								}
								this.tabs[i].className = this.tabs[i].className.replace("active", "");
							}
							this.className += " active";
							c.style.display = "block";
							return false;
						}
				}
			}
	}
}

var _tHolder = null;
var _tContent = null;

function initToolTip() {
	
	var _matrix = document.getElementById("matrix");
	_tHolder = document.getElementById("tooltip-holder");
	_tContent = document.getElementById("tooltip-content");
	if (_matrix && _tHolder && _tContent)
	{
		var tds = _matrix.getElementsByTagName("td");
		for (i = 0; i < tds.length; i ++)
		{
			if (tds[i].className.indexOf("name") != -1)
			{
				var _text = tds[i].getElementsByTagName("div");
				if (_text[0] && (_text[0].className.indexOf("text") != -1))
				{
					tds[i]._text = _text[0].innerHTML;
				}
				tds[i].onmouseover = function()
				{
					if (this._text)
					{
						_tContent.innerHTML = this._text;
						_tHolder.style.display = "block";
						_tHolder.style.top = getRealTop(this) - _tHolder.offsetHeight + 2 +"px";
						_tHolder.style.left = getRealLeft(this) + (this.offsetWidth/3) + "px";
					}
				}
				tds[i].onmouseout = function()
				{
						_tHolder.style.display="none";
				}
			}
		}
	}
}

function initToolTipProfile() {
	
	var _matrix = document.getElementById("profile-sub-no");
	_tHolder = document.getElementById("tooltip-holder");
	_tContent = document.getElementById("tooltip-content");
	if (_matrix && _tHolder && _tContent)
	{
		var tds = _matrix.getElementsByTagName("div");
		for (i = 0; i < tds.length; i ++)
		{
			var _in_label = false;
			if (tds[i].className.indexOf("field") != -1)
			{
				var _text = tds[i].getElementsByTagName("div");
				if (_text[0] && (_text[0].className.indexOf("text") != -1))
				{
					tds[i]._text = _text[0].innerHTML;
				}
				
				var _labels = tds[i].getElementsByTagName("label");
				if (_labels[0])
				{
					var _ems = _labels[0].getElementsByTagName("em");
					if (_ems[0])
					{
						tds[i]._holder = _ems[0];
						if (tds[i]._text)
						{
							_ems[0]._text = tds[i]._text;
						}
					}
				}
				if (tds[i]._holder)
				{
					tds[i]._holder.onmouseover = function()
					{
						if (this._text)
						{
							_tContent.innerHTML = this._text;
							_tHolder.style.display = "block";
							_tHolder.style.top = getRealTop(this) - _tHolder.offsetHeight + 2 +"px";
							_tHolder.style.left = getRealLeft(this) + (this.offsetWidth/3) + "px";
						}
					}
					tds[i]._holder.onmouseout = function()
					{
							_tHolder.style.display="none";
					}
				}
			}
		}
	}
}


function getRealTop(elem)
{
	yPos = elem.offsetTop;
	tempEl = elem.offsetParent;
	while (tempEl != null) {
  		yPos += tempEl.offsetTop;
  		tempEl = tempEl.offsetParent;
  	}
	return yPos;
}

function getRealLeft(elem)
{
	xPos = elem.offsetLeft;
	tempEl = elem.offsetParent;
  	while (tempEl != null) {
  		xPos += tempEl.offsetLeft;
  		tempEl = tempEl.offsetParent;
  	}
	return xPos;
}


//if (document.all && !window.opera)
	//attachEvent("onload", initNav);

if (window.addEventListener) {
	window.addEventListener("load", initToolTip, false);
	window.addEventListener("load", initToolTipProfile, false);
	window.addEventListener("load", initRoll, false);
	window.addEventListener("load", initProfile, false);
	window.addEventListener("load", initTabs, false);
}
else if (window.attachEvent)  {
	window.attachEvent("onload", initToolTip);
	window.attachEvent("onload", initToolTipProfile);
	window.attachEvent("onload", initRoll);
	window.attachEvent("onload", initProfile);
	window.attachEvent("onload", initTabs);
}
    
	
	
	
