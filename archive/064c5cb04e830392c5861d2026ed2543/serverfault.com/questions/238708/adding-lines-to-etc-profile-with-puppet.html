<!DOCTYPE html>
<html>

<head>
    
    <title>linux - Adding lines to /etc/profile with puppet? - Server Fault</title>
    <link rel="shortcut icon" href="../../../cdn.sstatic.net/serverfault/img/favicon.ico">
    <link rel="apple-touch-icon" href="http://cdn.sstatic.net/serverfault/img/apple-touch-icon.png">
    <link rel="search" type="application/opensearchdescription+xml" title="Server Fault" href="http://serverfault.com/opensearch.xml">

    
    <script type="text/javascript" src="../../../ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="../../../cdn.sstatic.net/js/stub.js%3Fv=8a629d6e9fb6"></script>
    <link rel="stylesheet" type="text/css" href="../../../cdn.sstatic.net/serverfault/all.css%3Fv=d7a5d298a345.css">
    
    <meta name="relativepagescore" content="171020">
    <link rel="canonical" href="adding-lines-to-etc-profile-with-puppet.html">
    <link rel="alternate" type="application/atom+xml" title="Feed for question 'Adding lines to /etc/profile with puppet?'" href="http://serverfault.com/feeds/question/238708">
    <script type="text/javascript">
        
        StackExchange.ready(function () {
            
            StackExchange.question.init({showAnswerHelp:true,totalCommentCount:1,shownCommentCount:1,highlightColor:'#F3F1D9',backgroundColor:'#FFF',questionId:238708});

            styleCode();

                StackExchange.realtime.subscribeToQuestion('2', '238708');
            
                
        });
    </script>


        <script type="text/javascript">
             StackExchange.ready(function () {
                 StackExchange.realtime.init('ws://sockets-se.or.stackexchange.com');
                StackExchange.realtime.subscribeToInboxNotifications();
                                 StackExchange.realtime.subscribeToReputationNotifications('2');            
                         });
        </script>
    <script type="text/javascript">
        StackExchange.init({"stackAuthUrl":"https://stackauth.com","serverTime":1353496291,"styleCode":true,"enableUserHovercards":true,"site":{"name":"Server Fault","description":"Q&A for professional system and network administrators","isNoticesTabEnabled":true,"recaptchaPublicKey":"6LcDNwYAAAAAAG_X1rC8kTtLBP6XS2Ym1N0n9kSY","enableSocialMediaInSharePopup":true},"user":{"fkey":"90ea91be9daabadb2c795db3615ff47c","isAnonymous":true}});
        StackExchange.using.setCacheBreakers({"js/prettify-full.js":"c862bf93b3ec","js/moderator.js":"37bba549a03e","js/full-anon.js":"bcd6f2e0d542","js/full.js":"87618162bac4","js/wmd.js":"89ec12ce09df","js/third-party/jquery.autocomplete.min.js":"e5f01e97f7c3","js/mobile.js":"6eb68240242f","js/help.js":"fc9fb0517db2","js/tageditor.js":"450c9e8426fc","js/tageditornew.js":"9ac6c13a3a7f","js/inline-tag-editing.js":"30f72b99548b","js/revisions.js":"8c6bcd93b7fe","js/review.js":"94bb46ac228f"});
        
    </script>
</head>
<body class="question-page">
    <noscript><div id="noscript-padding"></div></noscript>
    <div id="notify-container"></div>
    <div id="overlay-header"></div>
    <div id="custom-header"></div>

    <div class="container">
        <div id="header">
            <div id="portalLink">
                <a class="genu" href="http://stackexchange.com" onclick="StackExchange.ready(function(){genuwine.click();});return false;">Stack Exchange</a>
            </div>
            <div id="topbar">
                <div id="hlinks">
                    









<span id="hlinks-user">

</span>
<span id="hlinks-nav">
                   <a href="http://serverfault.com/users/login?returnurl=%2fquestions%2f238708%2fadding-lines-to-etc-profile-with-puppet">log in</a>

 <span class="lsep">|</span>
                    <a href="http://careers.serverfault.com">careers 2.0</a>

 <span class="lsep">|</span>

</span>
<span id="hlinks-custom">
        <a href="http://chat.stackexchange.com">chat</a>

 <span class="lsep">|</span>
                <a href="http://meta.serverfault.com">meta</a>

 <span class="lsep">|</span>
        <a href="http://serverfault.com/about">about</a>

 <span class="lsep">|</span>
    <a href="http://serverfault.com/faq">faq</a>

</span>
                </div>
                <div id="hsearch">
                    <form id="search" action="http://serverfault.com/search" method="get" autocomplete="off">
                    <div>
                        <input autocomplete="off" name="q" class="textbox" placeholder="search" tabindex="1" type="text" maxlength="140" size="28" value="">
                    </div>
                    </form>
                </div>
            </div>
            <br class="cbt">
            <div id="hlogo">
                <a href="http://serverfault.com/" >Server Fault</a>
            </div>
            <div id="hmenus">
                <div class="nav mainnavs">
                    <ul>
                        <li class="youarehere"><a id="nav-questions" href="http://serverfault.com/questions">Questions</a></li>
                        <li><a id="nav-tags" href="http://serverfault.com/tags">Tags</a></li>
                        <li><a id="nav-users" href="http://serverfault.com/users">Users</a></li>
                        <li><a id="nav-badges" href="http://serverfault.com/badges">Badges</a></li>
                        <li><a id="nav-unanswered" href="http://serverfault.com/unanswered">Unanswered</a></li>
                    </ul>
                </div>
                <div class="nav askquestion">
                    <ul>
                        <li>
                            <a id="nav-askquestion"  href="http://serverfault.com/questions/ask">Ask Question</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        



        <div id="content">
            

<div itemscope itemtype="http://schema.org/Article">
<link itemprop="image" href="http://cdn.sstatic.net/serverfault/img/apple-touch-icon.png">
<div id="question-header">
    <h1 itemprop="name"><a href="adding-lines-to-etc-profile-with-puppet.html" class="question-hyperlink">Adding lines to /etc/profile with puppet?</a></h1>
</div>
<div id="mainbar">



<div class="question" id="question" data-questionid="238708" >
            <div class="everyonelovesstackoverflow" id="adzerk1">
        </div>



    <table>
    <tr>
    <td class="votecell">
        

<div class="vote">
    <input type="hidden" value="238708">
    <a class="vote-up-off" title="This question shows research effort; it is useful and clear (click again to undo)">up vote</a>
    <span class="vote-count-post">1</span>
    <a class="vote-down-off" title="This question does not show any research effort; it is unclear or not useful (click again to undo)">down vote</a>
    
    <a class="star-off" href="adding-lines-to-etc-profile-with-puppet.html#" title="This is a favorite question (click again to undo)">favorite</a>
    <div class="favoritecount"><b>4</b></div>   

 
</div>

    </td>
    
<td class="postcell">
<div>          
    <div class="post-text" itemprop="description">
        <p>I use puppet to install a current JDK and tomcat.</p>

<pre><code>package {
    [ "openjdk-6-jdk", "openjdk-6-doc", "openjdk-6-jre",
      "tomcat6", "tomcat6-admin", "tomcat6-common", "tomcat6-docs", 
      "tomcat6-user" ]:
    ensure =&gt; present,
}
</code></pre>

<p>Now I'd like to add </p>

<pre><code>JAVA_HOME="/usr/lib/java"
export JAVA_HOME
</code></pre>

<p>to <code>/etc/profile</code>, just to get this out of the way. I haven't found a straightforward answer in the docs, yet. Is there a recommended way to do this?</p>

<p>In general, how do I tell puppet to place this file there or modify that file? I'm using puppet for a single node (in standalone mode) just to try it out and to keep <a href="http://serverfault.com/questions/234970/server-installation-logging-logbook-diary">a log of the server setup</a>.</p>

    </div>            
    <div class="post-taglist">
        <a href="http://serverfault.com/questions/tagged/linux" class="post-tag" title="show questions tagged 'linux'" rel="tag">linux</a> <a href="http://serverfault.com/questions/tagged/bash" class="post-tag" title="show questions tagged 'bash'" rel="tag">bash</a> <a href="http://serverfault.com/questions/tagged/puppet" class="post-tag" title="show questions tagged 'puppet'" rel="tag">puppet</a> <a href="http://serverfault.com/questions/tagged/append" class="post-tag" title="show questions tagged 'append'" rel="tag">append</a> 
    </div>
    <table class="fw">
    <tr>
    <td class="vt">









<div class="post-menu"><a href="http://serverfault.com/q/238708" title="short permalink to this question" class="short-link" id="link-post-238708">share</a><span class="lsep">|</span><a href="http://serverfault.com/posts/238708/edit" class="suggest-edit-post" title="">improve this question</a></div>
    </td>
    <td align="right" class="post-signature">


    <div class="user-info ">
        <div class="user-action-time">
                            edited
                             <a href="http://serverfault.com/posts/238708/revisions" title="show all edits to this post"><span title="2011-02-22 15:49:46Z" class="relativetime">Feb 22 '11 at 15:49</span></a>

        </div>
        <div class="user-gravatar32">
            
        </div>
        <div class="user-details">
            <br>
            
        </div>
    </div>
    </td>
    <td class="post-signature owner">
    

    <div class="user-info ">
        <div class="user-action-time">
                                    asked
 <span title="2011-02-22 15:44:17Z" class="relativetime">Feb 22 '11 at 15:44</span>
        </div>
        <div class="user-gravatar32">
            <a href="http://serverfault.com/users/4346/miku"><div class=""><img src="../../../www.gravatar.com/avatar/bb5230985aa2c9ea7d022d1a16890f16%3Fs=32&amp;d=identicon&amp;r=PG" alt="" width="32" height="32"></div></a>
        </div>
        <div class="user-details">
            <a href="http://serverfault.com/users/4346/miku">miku</a><br>
            <span class="reputation-score" title="reputation score" dir="ltr">253</span><span title="1 silver badge"><span class="badge2"></span><span class="badgecount">1</span></span><span title="7 bronze badges"><span class="badge3"></span><span class="badgecount">7</span></span>
        </div>
    </div>

    </td>
    </tr>
    </table>
</div>
</td>    </tr>


<tr>
<td class="votecell"></td>
<td>
    <div id="comments-238708" class="comments">
        <table>
        <tbody>
                    
    <tr id="comment-216179" class="comment">
        <td class="comment-actions"><table><tbody><tr>
<td class="comment-score">
<span title="number of 'useful comment' votes received" class="cool">1</span>
</td>
<td>
&nbsp;
</td></tr>
</tbody></table></td>
        <td class="comment-text"><div><span class="comment-copy">If you&#39;re getting into Puppet, check out Example42 for prebuilt modules. They don&#39;t always work as you&#39;d want, but they&#39;re coherent and stable. <a href="https://github.com/example42/puppet-modules" rel="nofollow">github.com/example42/puppet-modules</a></span> &ndash;&nbsp;<a href="http://serverfault.com/users/9110/kashani" title="2689 reputation" class="comment-user">kashani</a> <span class="comment-date" dir="ltr"><span title="2011-02-22 16:38:15Z" class="relativetime-clean">Feb 22 '11 at 16:38</span></span></div></td>
    </tr>

        </tbody>
    
        </table>
    </div>
    
    
    <div class="was-this-helpful">
        feedback
    </div>
    
</td>
</tr>            </table>    
</div>


    


<div id="answers">

    <a name="tab-top"></a>
    <div id="answers-header">
        <div class="subheader answers-subheader">
            <h2>
                    2 Answers
            </h2>
            <div id="tabs">
                <a href="http://serverfault.com/questions/238708/adding-lines-to-etc-profile-with-puppet?answertab=active#tab-top" title="Answers with the latest activity first">active</a>
<a href="http://serverfault.com/questions/238708/adding-lines-to-etc-profile-with-puppet?answertab=oldest#tab-top" title="Answers in the order they were provided">oldest</a>
<a class="youarehere" href="http://serverfault.com/questions/238708/adding-lines-to-etc-profile-with-puppet?answertab=votes#tab-top" title="Answers with the highest score first">votes</a>

            </div>
        </div>    
    </div>    





  
    <a name="238713"></a>
    <div id="answer-238713" class="answer accepted-answer"  data-answerid="238713">
        <table>
        <tr>
        <td class="votecell">
            

<div class="vote">
    <input type="hidden" value="238713">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post">12</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    

            <span class="vote-accepted-on load-accepted-answer-date" title="loading when this answer was accepted...">accepted</span>
 
</div>

        </td>
        


<td class="answercell">
    <div class="post-text"><p>Add a file to <code>/etc/profile.d/</code> with the suffix <code>.sh</code>.  It will be sourced as part of /etc/profile in Red Hat and Debian and derivatives, can't say on other distros.  Generally speaking, if at all possible, it's better to add snippets rather than replace distributed files as it tends to be more future safe.</p>

<p>So in puppet, the following would do:</p>

<pre><code>file { "/etc/profile.d/set_java_home.sh":
    ensure =&gt; present,
    source =&gt; ...[whatever's appropriate for your setup]...,
    ...
}
</code></pre>

<p>This what you're looking for or do you need more detail?</p>
</div>
    <table class="fw">
    <tr>
    <td class="vt">









<div class="post-menu"><a href="http://serverfault.com/a/238713" title="short permalink to this answer" class="short-link" id="link-post-238713">share</a><span class="lsep">|</span><a href="http://serverfault.com/posts/238713/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
            


    <td align="right" class="post-signature">   
       

    

    <div class="user-info ">
        <div class="user-action-time">
                                    answered
 <span title="2011-02-22 15:55:06Z" class="relativetime">Feb 22 '11 at 15:55</span>
        </div>
        <div class="user-gravatar32">
            <a href="http://serverfault.com/users/56397/mark"><div class=""><img src="../../../www.gravatar.com/avatar/e98d98934b2a1df820541e3e48d2fa48%3Fs=32&amp;d=identicon&amp;r=PG" alt="" width="32" height="32"></div></a>
        </div>
        <div class="user-details">
            <a href="http://serverfault.com/users/56397/mark">mark</a><br>
            <span class="reputation-score" title="reputation score" dir="ltr">1,527</span><span title="3 silver badges"><span class="badge2"></span><span class="badgecount">3</span></span><span title="7 bronze badges"><span class="badge3"></span><span class="badgecount">7</span></span>
        </div>
    </div>

    </td>
    </tr>
    </table>
</td>        </tr>


<tr>
<td class="votecell"></td>
<td>
    <div id="comments-238713" class="comments">
        <table>
        <tbody>
                    
    <tr id="comment-216164" class="comment">
        <td></td>
        <td class="comment-text"><div><span class="comment-copy">This also works on OpenSUSE and Gentoo.</span> &ndash;&nbsp;<a href="http://serverfault.com/users/5922/kamil-kisiel" title="7274 reputation" class="comment-user">Kamil Kisiel</a> <span class="comment-date" dir="ltr"><span title="2011-02-22 16:02:38Z" class="relativetime-clean">Feb 22 '11 at 16:02</span></span></div></td>
    </tr>
            
    <tr id="comment-216167" class="comment">
        <td></td>
        <td class="comment-text"><div><span class="comment-copy">Thanks, that&#39;s great. Got it almost working, just need to find an appropriate way to reference a file relative to the <code>.pp</code> as source.</span> &ndash;&nbsp;<a href="http://serverfault.com/users/4346/miku" title="253 reputation" class="comment-user owner">miku</a> <span class="comment-date" dir="ltr"><span title="2011-02-22 16:17:01Z" class="relativetime-clean">Feb 22 '11 at 16:17</span></span></div></td>
    </tr>
            
    <tr id="comment-216175" class="comment">
        <td></td>
        <td class="comment-text"><div><span class="comment-copy">Assuming Puppet 0.25 or better source =&gt; puppet:///$modulename/$file with the real system path being $modulename/files/$file</span> &ndash;&nbsp;<a href="http://serverfault.com/users/9110/kashani" title="2689 reputation" class="comment-user">kashani</a> <span class="comment-date" dir="ltr"><span title="2011-02-22 16:35:30Z" class="relativetime-clean">Feb 22 '11 at 16:35</span></span></div></td>
    </tr>
            
    <tr id="comment-227149" class="comment">
        <td class="comment-actions"><table><tbody><tr>
<td class="comment-score">
<span title="number of 'useful comment' votes received" class="cool">1</span>
</td>
<td>
&nbsp;
</td></tr>
</tbody></table></td>
        <td class="comment-text"><div><span class="comment-copy">IIRC 2.6.5 and later emits a deprecation warning if you use the puppet:///$modulename/files/$filename notation. it should look like puppet:///modules/$modulename/files/$filename</span> &ndash;&nbsp;<a href="http://serverfault.com/users/47424/ztron" title="173 reputation" class="comment-user">ztron</a> <span class="comment-date" dir="ltr"><span title="2011-03-18 20:58:30Z" class="relativetime-clean">Mar 18 '11 at 20:58</span></span></div></td>
    </tr>

        </tbody>
    
        </table>
    </div>
    
    
    <div class="was-this-helpful">
        feedback
    </div>
    
</td>
</tr>            </table>
</div>
        <div class="everyonelovesstackoverflow" id="adzerk3">
        </div>




  
    <a name="372185"></a>
    <div id="answer-372185" class="answer"  data-answerid="372185">
        <table>
        <tr>
        <td class="votecell">
            

<div class="vote">
    <input type="hidden" value="372185">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post">4</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    

 
</div>

        </td>
        


<td class="answercell">
    <div class="post-text"><p>mark's solution is the best for adding stuff to everyone's profile, but if you ever need to ensure some lines are in a file, Puppet Labs has a great module called <a href="https://github.com/puppetlabs/puppetlabs-stdlib" rel="nofollow">stdlib</a> which includes file_line which will do what you need. Previously I've used echo and grep in the exec type to do this, but file_line is so much easier and cleaner.</p>

<p>Here's the help for it:</p>

<pre><code>Ensures that a given line is contained within a file. The implementation
matches the full line, including whitespace at the beginning and end. If
the line is not contained in the given file, Puppet will add the line to
ensure the desired state. Multiple resources may be declared to manage
multiple lines in the same file.

Example:

file_line { 'sudo_rule':
   path =&gt; '/etc/sudoers',
   line =&gt; '%sudo ALL=(ALL) ALL',
}
file_line { 'sudo_rule_nopw':
   path =&gt; '/etc/sudoers',
   line =&gt; '%sudonopw ALL=(ALL) NOPASSWD: ALL',
}

In this example, Puppet will ensure both of the specified lines are
contained in the file /etc/sudoers.
</code></pre>
</div>
    <table class="fw">
    <tr>
    <td class="vt">









<div class="post-menu"><a href="http://serverfault.com/a/372185" title="short permalink to this answer" class="short-link" id="link-post-372185">share</a><span class="lsep">|</span><a href="http://serverfault.com/posts/372185/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
            


    <td align="right" class="post-signature">   
       

    

    <div class="user-info ">
        <div class="user-action-time">
                                    answered
 <span title="2012-03-21 22:18:42Z" class="relativetime">Mar 21 at 22:18</span>
        </div>
        <div class="user-gravatar32">
            <a href="http://serverfault.com/users/67023/mmckinst"><div class=""><img src="../../../www.gravatar.com/avatar/fcf41de0b1596b30c7e0a272b233a6e3%3Fs=32&amp;d=identicon&amp;r=PG" alt="" width="32" height="32"></div></a>
        </div>
        <div class="user-details">
            <a href="http://serverfault.com/users/67023/mmckinst">mmckinst</a><br>
            <span class="reputation-score" title="reputation score" dir="ltr">405</span><span title="2 silver badges"><span class="badge2"></span><span class="badgecount">2</span></span><span title="3 bronze badges"><span class="badge3"></span><span class="badgecount">3</span></span>
        </div>
    </div>

    </td>
    </tr>
    </table>
</td>        </tr>


<tr>
<td class="votecell"></td>
<td>
    <div id="comments-372185" class="comments dno">
        <table>
        <tbody>
        
            <tr><td></td><td></td></tr>
        
        </tbody>
    
        </table>
    </div>
    
    
    <div class="was-this-helpful">
        feedback
    </div>
    
</td>
</tr>            </table>
</div>
    <a name='new-answer'></a>
    <form id="post-form" action="http://serverfault.com/questions/238708/answer/submit" method="post"  class="post-form">
        <h2 class="space">Your Answer</h2>




<script type="text/javascript">
    StackExchange.ready(function() {
        initTagRenderer("".split(" "), "".split(" "));
         
        prepareEditor({
            heartbeatType: 'answer',
            bindNavPrevention: true,
            postfix: "",
            onDemand: true,
            discardSelector: ".discard-answer"
            ,immediatelyShowMarkdownHelp:true
        });
        

    });  
</script>


<div id="post-editor" class="post-editor">  

    
    <div class="wmd-container">
        <div id="wmd-button-bar" class="wmd-button-bar"></div>
        <textarea id="wmd-input" class="wmd-input" name="post-text" cols="92" rows="15" tabindex="101"></textarea>
    </div>

    <div class="fl" style="margin-top: 8px; height:24px;">&nbsp;</div>
    <div id="draft-saved" class="draft-saved community-option fl" style="margin-top: 8px; height:24px; display:none;">draft saved</div>

    <div id="draft-discarded" class="draft-discarded community-option fl" style="margin-top: 8px; height:24px; display:none;">draft discarded</div>



    <div id="wmd-preview" class="wmd-preview"></div>
    <div></div>
    <div class="edit-block">
        <input id="fkey" name="fkey" type="hidden" value="90ea91be9daabadb2c795db3615ff47c">
        <input id="author" name="author" type="text">
    </div>
</div>            <div class="form-item">
        <table>
        <tr>
            <td class="vm open-id-login">
                <a id="login-link" style="font-size: 200%; margin-left: 30px;" href="http://serverfault.com/users/login?returnurl=%2fquestions%2f238708%2fadding-lines-to-etc-profile-with-puppet">log in</a>
                <script type="text/javascript">
                    StackExchange.ready(function () {
                        StackExchange.helpers.onClickDraftSave('#login-link');
                    });
                </script>
            </td>
            <td class="orcell">
                <div class="orword">or</div>
                <div class="orline"></div>
            </td>
            <td class="vm">
                <div>
                    <label for="display-name">Name</label>
                    <input id="display-name" name="display-name" type="text" size="30" maxlength="30" value="" tabindex="105">
                </div>
                <div>
                    <label for="m-address">Email</label>
                    <input id="m-address" name="m-address" type="text" size="40" maxlength="100" value="" tabindex="106">
                    <span class="edit-field-overlay">required, but never shown</span>
                </div>
                <div>
                    <label for="home-page">Home Page</label>
                    <input id="home-page" name="home-page" type="text" size="40" maxlength="200" value="" tabindex="107">
                </div>
            </td>
        </tr>
        </table>
    </div>
           
            <div class="form-submit cbt">
            <input id="submit-button" type="submit" value="Post Your Answer" tabindex="110">
            <a href="adding-lines-to-etc-profile-with-puppet.html#" class="discard-answer dno">discard</a>
    <p class="privacy-policy-agreement">
        By posting your answer, you agree to the 
        <a href="http://stackexchange.com/legal/privacy-policy" target="_blank">privacy policy</a> and 
        <a href="http://stackexchange.com/legal/terms-of-service" target="_blank">terms of service</a>.
    </p>
        </div>
    </form>



        <h2 class="bottom-notice">
                Not the answer you're looking for? 
            Browse other questions tagged <a href="http://serverfault.com/questions/tagged/linux" class="post-tag" title="show questions tagged 'linux'" rel="tag">linux</a> <a href="http://serverfault.com/questions/tagged/bash" class="post-tag" title="show questions tagged 'bash'" rel="tag">bash</a> <a href="http://serverfault.com/questions/tagged/puppet" class="post-tag" title="show questions tagged 'puppet'" rel="tag">puppet</a> <a href="http://serverfault.com/questions/tagged/append" class="post-tag" title="show questions tagged 'append'" rel="tag">append</a> 
                or <a href="http://serverfault.com/questions/ask">ask your own question</a>.
        </h2>
</div>
</div>
<div id="sidebar">



     <script type="text/javascript">
        window.showNewUser = true;

            
                (function(){
                    var cs = window.sessionStorage && window.sessionStorage['tNewsletter'];
                    var m = /:\/\/([^\/]*)/.exec(document.referrer);
                    var h = {'www.reddit.com':1,'news.ycombinator.com':1};
                    if(window.sessionStorage && (cs || (m && m.length == 2 && h[m[1]]))){
                        showNewUser = false;
                        StackExchange.ready(function(){
                            StackExchange.newsletterAd.loader(m[1], cs);
                        });
                    }
                    if (window.localStorage && showNewUser){
                        var c = parseInt(localStorage['nuCounter'],10); 
                        c = isNaN(c) ? 1 : c+1;
                        window.localStorage['nuCounter'] = c; 
                        showNewUser = c < 10;
                    }
                })()
            
     </script>
    <div class="module newuser newuser-greeting" id="newuser-box" style="display:none;">
        <h4>Greetings!</h4>
        <div>
            <p>This is a collaboratively edited question and answer site for <b>professional system and network administrators</b>. It's 100% free, no registration required.</p><p>Got a question about the site itself? <a href="http://meta.serverfault.com">meta</a> is the place to talk about things like what questions are appropriate, what tags we should use, etc.</p>
            <p class="ar"><a href="http://serverfault.com/about?mnu=1">about &raquo;</a>&nbsp;&nbsp;&nbsp;<a href="http://serverfault.com/faq?mnu=1">faq &raquo;</a>
&nbsp; <a href="http://meta.serverfault.com">meta &raquo;</a>            </p>
        </div>
    </div>
     <script type="text/javascript">
        if (showNewUser) {
            document.getElementById('newuser-box').style.display = '';
        }
     </script>
        <div class="module question-stats">
        <p class="label-key">tagged</p>
        <div class="tagged"><a href="http://serverfault.com/questions/tagged/linux" class="post-tag" title="show questions tagged 'linux'" rel="tag">linux</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">&times;</span>&nbsp;<span class="item-multiplier-count">17292</span></span><br>
<a href="http://serverfault.com/questions/tagged/bash" class="post-tag" title="show questions tagged 'bash'" rel="tag">bash</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">&times;</span>&nbsp;<span class="item-multiplier-count">1425</span></span><br>
<a href="http://serverfault.com/questions/tagged/puppet" class="post-tag" title="show questions tagged 'puppet'" rel="tag">puppet</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">&times;</span>&nbsp;<span class="item-multiplier-count">485</span></span><br>
<a href="http://serverfault.com/questions/tagged/append" class="post-tag" title="show questions tagged 'append'" rel="tag">append</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">&times;</span>&nbsp;<span class="item-multiplier-count">7</span></span><br>
</div>
        <table id="qinfo">
            <tr>
                <td><p class="label-key">asked</p></td>
                <td style="padding-left:10px"><p class="label-key" title="2011-02-22 15:44:17Z"><b>1 year ago</b></p></td>
            </tr>
            <tr>
                <td><p class="label-key">viewed</p></td>

                <td style="padding-left:10px">
                    <p class="label-key">
                        <b>2435 times</b>
                    </p>
                </td>
            </tr>
            <tr>
                <td><p class="label-key">active</p></td>
                <td style="padding-left:10px"><p class="label-key"><b><a href="http://serverfault.com/questions/238708/adding-lines-to-etc-profile-with-puppet?lastactivity" class="lastactivity-link" title="2012-03-21 22:18:42Z">8 months ago</a></b></p></td>
            </tr>
        </table>
    </div>
    
<div class="module community-bulletin" data-tracker="cb=1">
    <h4>Community Bulletin</h4>
    <div class="related">
        <div class="spacer">
            <div class="bulletin-item-type"><a href="http://blog.serverfault.com" class="event-date" target="_blank">blog</a></div>
            <div class="bulletin-item-content">
                <a href="http://blog.serverfault.com/2012/11/20/so-you-want-to-get-a-job-in-information-technology-part-2/" class="question-hyperlink" target="_blank">So You Want to Get a Job in Information Technology? (Part 2)</a>
            </div>
            <br class="cbt" />
        </div>
        <div class="spacer">
            <div class="bulletin-item-type"><a href="http://meta.serverfault.com" class="event-date" target="_blank">meta</a></div>
            <div class="bulletin-item-content">
                <a href="http://meta.serverfault.com/questions/3853/should-server-fault-be-removed-from-stack-overflows-migration-list" class="question-hyperlink" target="_blank">Should Server Fault be removed from Stack Overflow&#39;s migration list?</a>
            </div>
            <br class="cbt" />
        </div>
        <div class="spacer">
            <div class="bulletin-item-type"><a href="http://meta.serverfault.com" class="event-date" target="_blank">meta</a></div>
            <div class="bulletin-item-content">
                <a href="http://meta.serverfault.com/questions/3890/is-it-acceptable-to-heavily-edit-my-closed-question" class="question-hyperlink" target="_blank">Is it acceptable to heavily edit my closed question?</a>
            </div>
            <br class="cbt" />
        </div>
        <div class="spacer">
            <div class="bulletin-item-type"><a href="http://meta.serverfault.com" class="event-date" target="_blank">meta</a></div>
            <div class="bulletin-item-content">
                <a href="http://meta.serverfault.com/questions/3864/canonical-answer-to-data-recovery" class="question-hyperlink" target="_blank">Canonical Answer to Data Recovery</a>
            </div>
            <br class="cbt" />
        </div>
    </div>
</div>    
                <script type="text/javascript">
                var scriptSrc = "http://engine.adzerk.net/z/8278/adzerk1_2_4_49,adzerk2_2_17_50,adzerk3_2_4_51?keywords=linux,bash,puppet,append";
                if (document.referrer) {
                    if (/\?/.test(scriptSrc))
                        scriptSrc += "&";
                    else
                        scriptSrc += "?";
                    scriptSrc += "xReferrer=" + document.referrer;
                }
                StackExchange.ready(function () {
                    var z = document.createElement("script");
                    z.type = "text/javascript";
                    z.async = "true";
                    z.src = scriptSrc;
                    var s = document.getElementsByTagName("script")[0];
                    s.parentNode.insertBefore(z, s);
                });
            </script>
        <div class="everyonelovesstackoverflow" id="adzerk2">
        </div>
    <div id="hireme">
        <script type="text/javascript">
            var careers_adurl="http://careers.stackoverflow.com/gethired/js",careers_cssurl="http://careerscdn.sstatic.net/careers/gethired/sidebar.css?fffffffff879eaa0",careers_leaderboardcssurl="http://careerscdn.sstatic.net/careers/gethired/ninja.min.css?393e78",careers_companycssurl="http://careerscdn.sstatic.net/careers/gethired/company",careers_adselector="div.hireme, div#hireme";StackExchange.ready(function(){$.ajax({url:"http://careerscdn.sstatic.net/careers/gethired/loader.min.js?393e78",dataType:"script",cache:!0})})
        </script>
    </div>



    
<div class="module" id="chat-feature">
    

    
<h4><a href="http://chat.stackexchange.com" id="h-chat-link">Visit Chat</a></h4>

<div class="related" id="ad502-rooms"></div>
<script type="text/javascript">
// <!--
    StackExchange.ready(
    function () {
        var options = {
            chatUrl: 'http://chat.stackexchange.com',
            reloadUrl: '/api/recent-chat',
            preloadData: {"activeUsers":31,"activeRooms":18,"rooms":[{"name":"The Comms Room","id":127,"lastPost":1353495724,"posts":530127,"users":[{"name":"SmallClanger","id":4493,"emailhash":"0595a1f6d702238164e5b3bd121759bf","lastPost":1353495724},{"name":"Dan","id":24137,"emailhash":"1bd8539a680bb9c53fbf125f30b57576","lastPost":1353495430},{"name":"pauska","id":1949,"emailhash":"736558f18dfae17d79cf0479cac2838f","lastPost":1353485961},{"name":"Iain","id":1533,"emailhash":"5ed89f9c3282d40e51e5573a30a8fe97","lastPost":1353484951},{"name":"HopelessN00b","id":44799,"emailhash":"5386edb95ebf906d70f0fe1e5fe1005e","lastPost":1353484603},{"name":"Journeyman Geek","id":10208,"emailhash":"e88cb2b3858ca0df735806f1a8476b23","lastPost":1353481004},{"name":"freiheit","id":45,"emailhash":"0e68b82b2d7a20eba36c9fbe4350dd0d","lastPost":1353480979}],"messages":[{"date":1353495724,"user":"SmallClanger","userid":4493}],"singleImage":false,"tags":["markdown-ate-my-baby","markdown-makes-ponies-cry"]},{"name":"Server Fault: Improve or Close ","id":161,"lastPost":1353422981,"posts":6331,"users":[{"name":"Scott Pack","id":1516,"emailhash":"481707331ea4d07ae2490bb88ddfd7ca","lastPost":1353358564},{"name":"Ladadadada","id":27078,"emailhash":"318a601d968e1f67c5ddcffa691466d7","lastPost":1352721211}],"messages":[{"date":1353422981,"user":"Brent Pabst","userid":8704}],"singleImage":false,"tags":["stab-stab-stab"]}]} 
        };

        StackExchange.chatAd.init(options);
    });
// -->
</script>

</div>  
    
    <div class="module sidebar-linked">
        <h4 id="h-linked">Linked</h4>
        <div class="linked" data-tracker="lq=1">
            <div class="spacer">
<a href="http://serverfault.com/questions/234970/server-installation-logging-logbook-diary" class="question-hyperlink">Server installation logging / logbook / diary?</a>
</div>

        </div>
    </div>
    <div class="module sidebar-related">
        <h4 id="h-related">Related</h4>
        <div class="related" data-tracker="rq=1">
            <div class="spacer">
<a href="http://serverfault.com/questions/58790/how-can-i-have-puppet-deploy-ssh-keys-for-virtual-users" class="question-hyperlink">How can I have puppet deploy ssh keys for virtual users?</a>
</div>
<div class="spacer">
<a href="http://serverfault.com/questions/66850/puppet-adding-require-parameters-after-the-fact" class="question-hyperlink">Puppet: Adding require parameters after the fact</a>
</div>
<div class="spacer">
<a href="http://serverfault.com/questions/100977/puppet-manifest-example" class="question-hyperlink">Puppet manifest example</a>
</div>
<div class="spacer">
<a href="http://serverfault.com/questions/111766/adding-a-yum-repo-to-puppet-before-doing-anything-else" class="question-hyperlink">Adding a yum repo to puppet before doing anything else</a>
</div>
<div class="spacer">
<a href="http://serverfault.com/questions/177473/appending-output-to-a-file-at-the-same-time-truncating-it-to-n-lines" class="question-hyperlink">Appending output to a file at the same time truncating it to N lines</a>
</div>
<div class="spacer">
<a href="http://serverfault.com/questions/239990/puppet-variables" class="question-hyperlink">puppet variables</a>
</div>
<div class="spacer">
<a href="http://serverfault.com/questions/258677/puppet-testing-if-a-file-exist" class="question-hyperlink">Puppet Testing if a file exist</a>
</div>
<div class="spacer">
<a href="http://serverfault.com/questions/259037/puppet-capitalisation-of-definitions" class="question-hyperlink">puppet: capitalisation of definitions</a>
</div>
<div class="spacer">
<a href="http://serverfault.com/questions/302814/puppet-startup-error" class="question-hyperlink">puppet startup error</a>
</div>
<div class="spacer">
<a href="http://serverfault.com/questions/314847/appending-a-line-to-a-file-if-it-doesnt-exist-using-puppet" class="question-hyperlink">Appending a line to a file if it doesn&#39;t exist using Puppet</a>
</div>
<div class="spacer">
<a href="http://serverfault.com/questions/320509/puppet-restarts-services-twice-can-it-be-fixed" class="question-hyperlink">Puppet restarts services twice — can it be fixed?</a>
</div>
<div class="spacer">
<a href="http://serverfault.com/questions/336115/import-a-puppet-manifest-from-the-node-itself" class="question-hyperlink">Import a puppet manifest from the node itself?</a>
</div>
<div class="spacer">
<a href="http://serverfault.com/questions/339682/puppet-conditional-file-source" class="question-hyperlink">Puppet: conditional file source</a>
</div>
<div class="spacer">
<a href="http://serverfault.com/questions/343705/how-do-i-append-a-specific-number-of-null-bytes-to-a-file" class="question-hyperlink">How do I append a specific number of null bytes to a file?</a>
</div>
<div class="spacer">
<a href="http://serverfault.com/questions/345461/puppet-managing-puppet-client-conf" class="question-hyperlink">Puppet managing puppet_client.conf</a>
</div>
<div class="spacer">
<a href="http://serverfault.com/questions/365166/puppet-print-out-messages" class="question-hyperlink">Puppet print out messages</a>
</div>
<div class="spacer">
<a href="http://serverfault.com/questions/376621/avoiding-puppet-manifest-duplication" class="question-hyperlink">Avoiding Puppet manifest duplication</a>
</div>
<div class="spacer">
<a href="http://serverfault.com/questions/381333/puppet-realizing-defined-users" class="question-hyperlink">Puppet realizing defined users</a>
</div>
<div class="spacer">
<a href="http://serverfault.com/questions/393971/puppet-onlyif-specified-nodes" class="question-hyperlink">puppet onlyif specified nodes</a>
</div>
<div class="spacer">
<a href="http://serverfault.com/questions/408826/wrapping-defined-types-in-classes-puppet" class="question-hyperlink">Wrapping defined types in classes - puppet</a>
</div>
<div class="spacer">
<a href="http://serverfault.com/questions/409001/create-resources-function-and-puppet-enc" class="question-hyperlink">create_resources function and puppet ENC</a>
</div>
<div class="spacer">
<a href="http://serverfault.com/questions/426665/puppet-content-of-etc-hosts-template-with-facter" class="question-hyperlink">puppet content of /etc/hosts template with facter</a>
</div>
<div class="spacer">
<a href="http://serverfault.com/questions/431481/juju-puppet-services-configuration-files" class="question-hyperlink">Juju/Puppet service&#39;s configuration files</a>
</div>
<div class="spacer">
<a href="http://serverfault.com/questions/438327/splitting-ca-component-off-puppet-master" class="question-hyperlink">Splitting CA component off puppet master</a>
</div>
<div class="spacer">
<a href="http://serverfault.com/questions/439742/own-puppet-function" class="question-hyperlink">Own puppet function</a>
</div>

        </div>
    </div>
</div>

<div id="feed-link">
    <div id="feed-link-text"><a href="http://serverfault.com/feeds/question/238708" title="feed of this question and its answers"><span class="feed-icon"></span>question feed</a></div>
</div>
<script type="text/javascript">
StackExchange.ready(function(){$.get('/posts/238708/ivc/5332');});
</script>
<noscript>
    <div><img src="http://serverfault.com/posts/238708/ivc/5332" class="dno" alt="" width="0" height="0"></div>
</noscript><div style="display:none" id="prettify-lang">lang-sh</div></div>
        </div>
    </div>
    <div id="footer">
        <div class="footerwrap">
            <div id="footer-menu">
                <a href="http://serverfault.com/about">about</a> |
                <a href="http://serverfault.com/faq">faq</a> |
                <a href="http://blog.serverfault.com?blb=1">blog</a> |
                    <a href="http://chat.stackexchange.com">chat</a> |
                <a href="http://data.stackexchange.com">data</a> |
                <a href="http://stackexchange.com/legal">legal</a> |
                <a href="http://stackexchange.com/legal/privacy-policy">privacy policy</a> |
                <a href="http://stackexchange.com/about/hiring">jobs</a> |
                <a href="http://engine.adzerk.net/redirect/0/2844/2751/0/97c6c4c54b7e4898ab3daf67c117e55f/0">advertising info</a> |

                <a onclick="StackExchange.switchMobile('on', '/questions/238708/adding-lines-to-etc-profile-with-puppet')">mobile</a> |

                <b><a href="http://serverfault.com/help">contact us</a></b>
                  | <b><a href="http://meta.serverfault.com">feedback</a></b>
                <div id="footer-sites">
                    
                        <span style="color:#FE7A15;font-size:140%">&#9632;</span>&nbsp;<a href="http://stackoverflow.com">stackoverflow.com</a>&nbsp; 
                        <span style="color:#FE7A15;font-size:140%">&#9632;</span>&nbsp;<a href="http://stackapps.com">api/apps</a>&nbsp; 
                        <span style="color:#FE7A15;font-size:140%">&#9632;</span>&nbsp;<a href="http://careers.stackoverflow.com">careers 2.0</a>&nbsp; 
                        <span style="color:#E8272C;font-size:140%">&#9632;</span>&nbsp;<a href="http://serverfault.com">serverfault.com</a>&nbsp; 
                        <span style="color:#00AFEF;font-size:140%">&#9632;</span>&nbsp;<a href="http://superuser.com">superuser.com</a>&nbsp; 
                        <span style="color:#969696;font-size:140%">&#9632;</span>&nbsp;<a href="http://meta.stackoverflow.com">meta</a>&nbsp; 
                        <span style="color:#46937D;font-size:140%">&#9632;</span>&nbsp;<a href="http://area51.stackexchange.com">area&nbsp;51</a>&nbsp; 
                        <span style="color:#C0D0DC;font-size:140%">&#9632;</span>&nbsp;<a href="http://webapps.stackexchange.com">webapps</a>&nbsp; 
                        <span style="color:#000000;font-size:140%">&#9632;</span>&nbsp;<a href="http://gaming.stackexchange.com">gaming</a>&nbsp; 
                        <span style="color:#dd4814;font-size:140%">&#9632;</span>&nbsp;<a href="http://askubuntu.com">ubuntu</a>&nbsp; 
                        <span style="color:#9ce4fe;font-size:140%">&#9632;</span>&nbsp;<a href="http://webmasters.stackexchange.com">webmasters</a>&nbsp; 
                        <span style="color:#cf4d3f;font-size:140%">&#9632;</span>&nbsp;<a href="http://cooking.stackexchange.com">cooking</a>&nbsp; 
                        <span style="color:#f4f28d;font-size:140%">&#9632;</span>&nbsp;<a href="http://gamedev.stackexchange.com">game development</a>&nbsp; 
                        <span style="color:#0f3559;font-size:140%">&#9632;</span>&nbsp;<a href="http://math.stackexchange.com">math</a>&nbsp; 
                        <span style="color:#f2f2f2;font-size:140%">&#9632;</span>&nbsp;<a href="http://photo.stackexchange.com">photography</a>&nbsp; 
                        <span style="color:#037187;font-size:140%">&#9632;</span>&nbsp;<a href="http://stats.stackexchange.com">stats</a>&nbsp; 
                        <span style="color:#f1e7cc;font-size:140%">&#9632;</span>&nbsp;<a href="http://tex.stackexchange.com">tex</a>&nbsp; 
                        <span style="color:#e1cdae;font-size:140%">&#9632;</span>&nbsp;<a href="http://english.stackexchange.com">english</a>&nbsp; 
                        <span style="color:#a2d9f6;font-size:140%">&#9632;</span>&nbsp;<a href="http://cstheory.stackexchange.com">theoretical cs</a>&nbsp; 
                        <span style="color:#1b3e6c;font-size:140%">&#9632;</span>&nbsp;<a href="http://programmers.stackexchange.com">programmers</a>&nbsp; 
                        <span style="color:#293a5d;font-size:140%">&#9632;</span>&nbsp;<a href="http://unix.stackexchange.com">unix</a>&nbsp;
                        <span style="color:#bec0cb;font-size:140%">&#9632;</span>&nbsp;<a href="http://apple.stackexchange.com">apple</a>&nbsp;
                        <span style="color:#939185;font-size:140%">&#9632;</span>&nbsp;<a href="http://wordpress.stackexchange.com">wordpress</a>&nbsp;
                        <span style="color:#ebf5f5;font-size:140%">&#9632;</span>&nbsp;<a href="http://physics.stackexchange.com">physics</a>&nbsp;
                        <span style="color:#4176ab;font-size:140%">&#9632;</span>&nbsp;<a href="http://diy.stackexchange.com">home&nbsp;improvement</a>&nbsp;
                        <span style="color:#d1d8d7;font-size:140%">&#9632;</span>&nbsp;<a href="http://gis.stackexchange.com">gis</a>&nbsp;
                        <span style="color:#e5e2d3;font-size:140%">&#9632;</span>&nbsp;<a href="http://electronics.stackexchange.com">electrical&nbsp;engineering</a>&nbsp;
                        <span style="color:#a4c639;font-size:140%">&#9632;</span>&nbsp;<a href="http://android.stackexchange.com">android</a>&nbsp;
                        <span style="color:#2e4e60;font-size:140%">&#9632;</span>&nbsp;<a href="http://security.stackexchange.com">security</a>&nbsp;
                        <span style="color:#45bcb5;font-size:140%">&#9632;</span>&nbsp;<a href="http://bicycles.stackexchange.com">bicycles</a>&nbsp;
                        <span style="color:#00adee;font-size:140%">&#9632;</span>&nbsp;<a href="http://dba.stackexchange.com">dba</a>&nbsp;
                        <span style="color:#2edaf0;font-size:140%">&#9632;</span>&nbsp;<a href="http://drupal.stackexchange.com">drupal</a>&nbsp;
                        <span style="color:#213951;font-size:140%">&#9632;</span>&nbsp;<a href="http://sharepoint.stackexchange.com">sharepoint</a>&nbsp;
                        <span style="color:#73abb3;font-size:140%">&#9632;</span>&nbsp;<a href="http://scifi.stackexchange.com">scifi &amp; fantasy</a>&nbsp;
                        <span style="color:#23629F;font-size:140%">&#9632;</span>&nbsp;<a href="http://ux.stackexchange.com">user experience</a>&nbsp;
                        <span style="color:#faff72;font-size:140%">&#9632;</span>&nbsp;<a href="http://skeptics.stackexchange.com">skeptics</a>&nbsp;
                        <span style="color:#623121;font-size:140%">&#9632;</span>&nbsp;<a href="http://rpg.stackexchange.com">rpg</a>&nbsp;
                        <span style="color:#e4be88;font-size:140%">&#9632;</span>&nbsp;<a href="http://judaism.stackexchange.com">judaism</a>&nbsp;
                        <span style="color:#ffecb1;font-size:140%">&#9632;</span>&nbsp;<a href="http://mathematica.stackexchange.com">mathematica</a>&nbsp;
                </div>
            </div>
            <div id="footer-flair">
                <a class="peer1" href="http://www.peer1.com/stackoverflow"></a>  
	            <a href="http://creativecommons.org/licenses/by-sa/3.0/" class="cc-wiki-link"></a>
                <div id="svnrev">rev 2012.11.21.390</div>
                        </div>
            <div id="copyright">
                site design / logo &copy; 2012 stack exchange inc; 
                user contributions licensed under <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license">cc-wiki</a> with <a href="http://blog.stackoverflow.com/2009/06/attribution-required/" rel="license">attribution required</a>
            </div>
            

        </div>
    </div>
    
    <noscript>
        <div id="noscript-warning">Server Fault works best with JavaScript enabled<img src="http://pixel.quantserve.com/pixel/p-c1rF4kxgLUzNc.gif" alt="" class="dno"></div>
    </noscript>
    <script type="text/javascript">var _gaq=_gaq||[];_gaq.push(['_setAccount','UA-5620270-2']);
        _gaq.push(['_setCustomVar', 1, 'tags', '|linux|bash|puppet|append|']); 
_gaq.push(['_trackPageview']);
    var _qevents = _qevents || [];
    (function(){
        var s=document.getElementsByTagName('script')[0];
        var ga=document.createElement('script');
        ga.type='text/javascript';
        ga.async=true;
        ga.src='http://www.google-analytics.com/ga.js';
        s.parentNode.insertBefore(ga,s);
        var sc=document.createElement('script');
        sc.type='text/javascript';
        sc.async=true;
        sc.src='http://edge.quantserve.com/quant.js'; 
        s.parentNode.insertBefore(sc,s);
    })();
    </script>
    <script type="text/javascript">
        _qevents.push({ qacct: "p-c1rF4kxgLUzNc" });
    </script>    
    
</body>
</html>